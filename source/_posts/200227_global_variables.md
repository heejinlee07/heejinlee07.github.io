---
title: 전역 변수의 문제점
date: 2020-02-27
tags:
---

## 변수의 생명 주기

### 지역 변수의 생명 주기

= 함수의 생명 주기

```javascript
function foo() {
  var x = "local";
  console.log(x); // local
  return x;
}

foo();
console.log(x); // ReferenceError: x is not defined
```

함수 내부에 선언된 지역 변수 x는 foo 함수가 호출되어 실행되는 동안에만 유효하다.

### 전역 변수의 생명 주기

전역 코드는 함수 호출과 같이 전역 코드를 실행하는 특별한 진입점(entry point)이 없고 코드가 로드되자마자 곧바로 해석되고 실행된다. 전역 코드에는 return 문을 사용할 수 없으므로 마지막 문이 실행되어 더 이상 실행할 문이 없을 때 종료한다.

전역 변수의 생명 주기는 전역 객체의 생명 주기와 일치한다. 전역 객체(Global Object)는 코드가 실행되기 이전 단계에 자바스크립트 엔진에 의해 생성되는 특수한 객체이다.

### 전역 변수의 문제점

- 암묵적 결합: 모든 코드가 전역 변수를 참조하고 변경할 수 있다.
- 긴 생명 주기: 메모리 리소스도 오랜 기간 소비한다.
- 느린 검색 속도: 스코프 체인 상에서 종점에 존재하기 때문에 변수를 검색할 때 가장 마지막에 검색된다.
- 네임 스페이스 오염: 파일이 분리되어 있어도 하나의 전역 스코프를 공유하므로 다른 파일 내에 동일한 이름의 변수나 함수가 같은 스코프 내에 있다면 예상치 못한 결과가 있을 수 있다.

## 전역 변수 사용 억제 방법

전역 변수를 반드시 사용하여야 할 이유를 찾지 못한다면 지역 변수를 사용하여야 한다. 변수의 스코프는 좁을수록 좋다.

- 즉시 실행 함수: 모든 코드를 즉시 실행 함수로 감싸면 모든 변수는 즉시 실행 함수의 지역 변수가 된다.
- 전역에 네임 스페이스(Namespace) 역할을 담당할 객체를 생성하고 전역 변수처럼 사용하고 싶은 변수를 프로퍼티로 추가
- 모듈 패턴: 클래스를 모방하여 관련이 있는 변수와 함수를 모아 즉시 실행 함수로 감싸 하나의 모듈을 만든다.
